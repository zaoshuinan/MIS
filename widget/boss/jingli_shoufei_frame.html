<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>APP</title>
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
    <link rel="stylesheet" type="text/css" href="../css/aui-accordion.css" />
    <link rel="stylesheet" type="text/css" href="../css/aui-slide.css" />
    
</head>
<body>
    <div id="chartBox" class="aui-col-xs-12"; style="height:500px;">
        
    </div>
</body>
<script type="text/javascript" src="../script/api.js" ></script>
<script type="text/javascript" src="../script/mis.js" ></script>
<script type="text/javascript" src="../script/echarts.min.js" ></script>
<script type="text/javascript" src="../script/aui-accordion.js"></script>
<script type="text/javascript" src="../script/aui-tap.js" ></script>
<script type="text/javascript" src="../script/aui-slide.js"></script>
<script type="text/javascript" src="../script/echarts.min.js" ></script>
<script type="text/javascript">
var headerHeight,frameHeight,buttonBoxHeight,jingliData,tongjiData;
var companyId = $api.getStorage('companyId');
var jingliArr = new Array();
var showArr = new Array();
var showNumArr = new Array();
var showName = '收费';
var showColor = '#2ecc71';
function buildChart(){
    var chartBox = $api.byId('chartBox');
    var tongjiChart = echarts.init(chartBox);
    var option = {
        title: {
            text: '经理'+showName+'横比'
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        legend: {
            data: [showName],
            left: 'right'
        },
        //color:['#e74c3c','#f1c40f','#2ecc71'],
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: {
            type: 'value',
            boundaryGap: [0, 0.01]
        },
        yAxis: {
            type: 'category',
            data: jingliArr
        },
        color:[showColor],
        series: [
            {
                name: showName,
                type: 'bar',
                data: showNumArr,
                markPoint: {
                    data: [
                        {type: 'max', name: '最大值'},
                        {type: 'min', name: '最小值'}
                    ]
                },
                markLine: {
                    data: [
                        {type: 'average', name: '平均值'}
                    ]
                }
            }
        ]
    };


    tongjiChart.setOption(option, true);
}



function reBuildData(){
    //alert(JSON.stringify(tongjiData))
    for(var tongjiKey in tongjiData){
        var thisJingliKeyName = tongjiData[tongjiKey].user_name;
        var thisJingliKeyId = tongjiData[tongjiKey].user_id;
        var thisKey1 = thisJingliKeyName + thisJingliKeyId;
        showArr[thisKey1] = tongjiData[tongjiKey].shoufei_num;
    }
    var num = 0;
    for(var jingliKey in jingliData){
        var thisJingliName = jingliData[jingliKey].user_name;
        var thisJingliId = jingliData[jingliKey].id;
        var thisKey2 = thisJingliName + thisJingliId;
        jingliArr[num] = thisJingliName;
        if(showArr[thisKey2]){
            showNumArr[num] = showArr[thisKey2];
        }else{
            showNumArr[num] = 0;
        }
        num ++;
    }
    setTimeout("buildChart()",50);
}
apiready = function(){
    api.parseTapmode();
    jingliData = api.pageParam.jingliData;
    tongjiData = api.pageParam.tongjiData;
    reBuildData();
}
    
</script>
</html>