<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>APP</title>
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
</head>
<body>
    <div class="aui-content-padded icons" style="padding-top: 20px;">
        <ul class="aui-grid-nine" id="viewBox1">
            <li class="aui-col-xs-12 aui-text-center" tapmode onclick="openQingjie()"><img src="../image/dasaoqingdan.png" style="width:60px"><p>按时间查看清扫任务</p></li>
        </ul>
    </div>
    <div class="aui-content-padded icons" style="padding-top: 20px;">
        <ul class="aui-grid-nine" id="viewBox">

        </ul>
    </div>
</body>
<script type="text/javascript" src="../script/api.js" ></script>
<script type="text/javascript" src="../script/mis.js" ></script>
<script type="text/javascript" src="../script/laytpl.js" ></script>
<script type="text/javascript">
var cacheCompany = $api.getStorage('cacheCompany');
var cacheRoom = $api.getStorage('cacheRoom');
//alert(JSON.stringify(cacheRoom))
function openQingjie(){
    api.openWin({
        name: 'qingjieToDo',
        url: './qingjie_todo_win.html',
        pageParam: {
            name: 'value'
        }
    });
}
function buildRoomBox(){
    var innerStr = '';
    var roomConfigArr = cacheRoom.config_data;
    var roomTypeNum = roomConfigArr.length;
    var showClass;
    if(roomTypeNum == 1){
        showClass = 'aui-col-xs-12';
    }
    if(roomTypeNum == 2){
        showClass = 'aui-col-xs-6';
    }
    if(roomTypeNum == 3){
        showClass = 'aui-col-xs-4';
    }
    if(roomTypeNum == 4){
        showClass = 'aui-col-xs-6';
    }
    if(roomTypeNum == 5){
        showClass = 'aui-col-xs-4';
    }
    if(roomTypeNum == 6){
        showClass = 'aui-col-xs-4';
    }
    for(var i = 0;i < roomConfigArr.length;i++){
        var thisRoomConfig = roomConfigArr[i]
        var roomTypeName = thisRoomConfig.type_name;
        var roomTypeId = thisRoomConfig.room_type;
        var roomTypeHang = thisRoomConfig.type_hang;
        var roomTypeLie = thisRoomConfig.type_lie;
        var roomConfigId = thisRoomConfig.id;
        if(i <6){
            var roomNum = i+1;
        }else{
            var roomNum = 1;
        }
        var thisStr = '<li class="'+showClass+' aui-text-center" tapmode onclick="openRoomType(\''+roomConfigId+'\',\''+roomTypeName+'\',\''+roomTypeHang+'\',\''+roomTypeLie+'\')"><img src="../image/room'+roomNum+'.png" style="width:60px"><p>'+roomTypeName+'</p></li>';
        innerStr += thisStr;
    }
    $api.html($api.byId('viewBox'), innerStr);
}
function openRoomType(roomConfigId,roomTypeName,roomTypeHang,roomTypeLie){
    api.openWin({
        name: 'showRoom',
        url: './show_room_win.html',
        pageParam: {
            roomTypeName: roomTypeName,
            roomConfigId:roomConfigId,
            roomTypeHang:roomTypeHang,
            roomTypeLie:roomTypeLie
        }
    });
}
apiready = function(){
    //alert(JSON.stringify(serviceJson));
    api.parseTapmode();
    buildRoomBox()
}  
</script>
</html>